<h3>{{playlist.name}} - {{playlist.band}}</h3>


<button class="btn btn-md btn-default pull-left" ng-click="newPlaylistPosition()">New</button>
<ul class="playlistBox">
    <div class="playlistInfoLine">
        <!--
        <div class="playlistEvent">{{playlist.event}}</div>
        <div class="playlistBand">{{playlist.band}}</div>
        <div class="playlistName">{{playlist.name}}</div>
        <button class="btn btn-xs btn-default pull-right" ng-click="newPlaylistPosition()">New</button>
        -->
    </div>
    <div id="PlaylistPositionEditor" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <!--
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                    -->
                    <h3>Edit Playlist Position {{playlistPositionToBeEdited.position}}</h3>
                </div>
                <div class="modal-body">
                    <form class="form" role="form">
                        <div class="form-group">
                            <label class="control-label" for="inputName">Name</label>
                            <div>
                                <input type="text" class="form-control" id="inputName" ng-model="playlistPositionToBeEdited.name">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label" for="tuneSetSelector">Set</label>
                            <div>
                                <select class="form-control" id="tuneSetSelector" ng-model="playlistPositionToBeEdited.tuneSet" ng-options="(tuneSet.tuneSetName) + ' (Set ' + tuneSet.tuneSetId + ')'  for tuneSet in tuneBook.tuneSets | orderBy:'tuneSetName'">	</select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label" for="inputAnnotation">Comment</label>
                            <div>
                                <input type="text" class="form-control" id="inputAnnotation" ng-model="playlistPositionToBeEdited.annotation">
                            </div>
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-default" ng-click="doneEditing(playlistPositionToBeEdited)">Done</button>
                </div>
            </div>
        </div>
    </div>


    <li class="playlistPosition" ng-repeat="playlistPosition in playlist.playlistPositions | orderBy: sortPlaylistPositionAsNumber">
        <div class="playlistPositionFirstLine">
            <div class="playlistPositionNumber">{{playlistPosition.position}}</div>
            <div class="btn-group">
                <a class="btn btn-default tuneTitle" ng-click="showSet(playlistPosition)" title="Show The Set"><strong>{{playlistPosition.name | eliminateThe}}</strong></a>
                <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li><a ng-click="moveUp(playlistPosition)">Move up</a></li>
                    <li class="divider"></li>
                    <li><a ng-click="moveDown(playlistPosition)">Move down</a></li>
                    <li class="divider"></li>
                    <li><a ng-click="edit(playlistPosition)">Edit</a></li>
                    <li class="divider"></li>
                    <li><a ng-click="delete(playlistPosition)">Delete</a></li>
                </ul>
            </div>
            <button type="button" ng-click="justPlayedTheSet(playlistPosition.tuneSet)" class="btn btn-default pull-right">
                Just Played
            </button>
        </div>
        <ul>
            <li ng-repeat="tuneSetPosition in playlistPosition.tuneSet.tuneSetPositions | orderBy: sortTuneSetPositionAsNumber">
                <div>
                    <div class="playlistTuneTitle">
                        <a href="#/tunes/{{tuneSetPosition.tune.intTuneId}}" title="Show The Tune">{{tuneSetPosition.tune.title | eliminateThe}}</a>
                    </div>
                    <div class="playlistTuneKey">{{tuneSetPosition.tune.key}}</div>
                    <div class="playlistTuneSetPositionRepeat">{{tuneSetPosition.repeat}}</div>
                    <div class="playlistTunePlayDateInfo">
                        <a class="btn btn-xs btn-default playlistJustPlayedTheTune" ng-click="justPlayedTheTune(tuneSetPosition.tune)" title="Just Played The Tune">Played</a>

                        <div class="playlistTuneLastPlayed">{{tuneSetPosition.tune.lastPlayed | fromNow}}</div>
                    </div>
                    <div class="playlistTuneSetPositionAnnotation" ng-show="tuneSetPosition.annotation != ''">{{tuneSetPosition.annotation}}</div>
                </div>
            </li>

        </ul>
        <div class="playlistPositionAnnotation" ng-show="playlistPosition.annotation != ''">{{playlistPosition.annotation}}</div>
    </li>
</ul>